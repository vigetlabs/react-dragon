{"version":3,"sources":["./dragon.jsx"],"names":[],"mappings":";;;;;;;;IAAO,KAAK,2BAAM,OAAO;;IAClB,EAAE,2BAAS,gBAAgB;;AAElC,IAAI,MAAM,GAAG,KAAK,CAAC,WAAW,CAAC;;;;AAE7B,WAAS,EAAE;AACT,UAAM,EAAG,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU;GACzC;;AAED,iBAAe,EAAA,2BAAG;AAChB,WAAO;AACL,WAAK,EAAO,KAAK;AACjB,eAAS,EAAG,EAAE;AACd,YAAM,EAAM,MAAM;AAClB,aAAO,EAAK,KAAK;AACjB,aAAO,EAAK,EAAE;KACf,CAAA;GACF;;AAED,iBAAe,EAAA,2BAAG;AAChB,WAAO;AACL,eAAS,EAAG,IAAI;AAChB,cAAQ,EAAI,KAAK;AACjB,eAAS,EAAG,KAAK;KAClB,CAAA;GACF;;AAED,QAAM,EAAA,kBAAG;QACD,QAAQ,GAA2B,IAAI,CAAC,KAAK,CAA7C,QAAQ;QAAE,SAAS,GAAgB,IAAI,CAAC,KAAK,CAAnC,SAAS;QAAE,SAAS,GAAK,IAAI,CAAC,KAAK,CAAxB,SAAS;QAC9B,SAAS,GAAiE,IAAI,CAAC,KAAK,CAApF,SAAS;QAAE,QAAQ,GAAuD,IAAI,CAAC,KAAK,CAAzE,QAAQ;QAAE,OAAO,GAA8C,IAAI,CAAC,KAAK,CAA/D,OAAO;QAAE,MAAM,GAAsC,IAAI,CAAC,KAAK,CAAtD,MAAM;QAAE,OAAO,GAA6B,IAAI,CAAC,KAAK,CAA9C,OAAO;QAAE,KAAK,GAAsB,IAAI,CAAC,KAAK,CAArC,KAAK;QAAE,MAAM,GAAc,IAAI,CAAC,KAAK,CAA9B,MAAM;QAAK,IAAI,4BAAK,IAAI,CAAC,KAAK;;AAE1F,QAAI,SAAS,GAAG,EAAE,CAAC;AACjB,uBAAiB,EAAI,QAAQ;AAC7B,wBAAkB,EAAG,SAAS;KAC/B,CAAC,CAAA;;AAEF,WAAO,KAAK,CAAC,aAAa,CAAC,OAAO;AAChC,eAAS,EAAK,EAAE,CAAC,QAAQ,EAAE,EAAE,CAAC,SAAS,CAAC,EAAE,SAAS,CAAC;AACpD,eAAS,EAAK,SAAS;AACvB,YAAM,EAAQ,IAAI,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;AAC/C,aAAO,EAAO,IAAI,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;AAChD,eAAS,EAAK,IAAI,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,EAAE,IAAI,CAAC;AACvE,iBAAW,EAAG,IAAI,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,EAAE,IAAI,CAAC;AACtD,gBAAU,EAAI,IAAI,CAAC,OAAO,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,EAAE,IAAI,CAAC;AACrD,iBAAW,EAAG,IAAI,CAAC,YAAY;AAC/B,YAAM,EAAQ,IAAI,CAAC,OAAO,IACvB,IAAI,GACN,QAAQ,CAAC,CAAA;GACb;;AAED,SAAO,EAAA,iBAAC,KAAK,EAAE,OAAO,EAAE;;AACtB,WAAO,UAAA,KAAK,EAAI;AACd,UAAI,OAAO,EAAE,KAAK,CAAC,cAAc,EAAE,CAAA;AACnC,YAAK,QAAQ,CAAC,KAAK,CAAC,CAAA;KACrB,CAAA;GACF;;AAED,cAAY,EAAA,sBAAC,CAAC,EAAE;QACR,MAAM,GAAqB,IAAI,CAAC,KAAK,CAArC,MAAM;QAAE,KAAK,GAAc,IAAI,CAAC,KAAK,CAA7B,KAAK;QAAE,OAAO,GAAK,IAAI,CAAC,KAAK,CAAtB,OAAO;;;AAE5B,KAAC,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC,CAAA;AAC7D,KAAC,CAAC,YAAY,CAAC,UAAU,GAAM,MAAM,CAAA;AACrC,KAAC,CAAC,YAAY,CAAC,aAAa,GAAG,KAAK,CAAA;;AAEpC,QAAI,CAAC,QAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC,CAAA;GAClC;;AAED,SAAO,EAAA,iBAAC,CAAC,EAAE;AACT,KAAC,CAAC,cAAc,EAAE,CAAA;;AAElB,QAAI,OAAO,GAAI,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAA;AAC/D,QAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAA;;AAEjC,QAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAA;;AAEpC,QAAI,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC,CAAA;GACrD;;CAEF,CAAC,CAAA;;iBAEa,MAAM","file":"dist/dragon.js","sourcesContent":["import React from 'react'\nimport cx    from 'react-classset'\n\nlet Dragon = React.createClass({\n\n  propTypes: {\n    onDrop : React.PropTypes.func.isRequired\n  },\n\n  getDefaultProps() {\n    return {\n      allow     : 'all',\n      className : '',\n      effect    : 'copy',\n      element   : 'div',\n      message   : {}\n    }\n  },\n\n  getInitialState() {\n    return {\n      draggable : true,\n      dragging  : false,\n      droppable : false\n    }\n  },\n\n  render() {\n    let { dragging, draggable, droppable } = this.state\n    let { className, children, element, onDrop, message, allow, effect, ...safe } = this.props\n\n    let modifiers = cx({\n      'dragon-dragging'  : dragging,\n      'dragon-droppable' : droppable\n    })\n\n    return React.createElement(element, {\n      className   : cx('dragon', cx(className), modifiers),\n      draggable   : draggable,\n      onBlur      : this._handle({ draggable: true }),\n      onFocus     : this._handle({ draggable: false }),\n      onDragEnd   : this._handle({ droppable: false, dragging: false }, true),\n      onDragLeave : this._handle({ droppable: false }, true),\n      onDragOver  : this._handle({ droppable: true }, true),\n      onDragStart : this._onDragStart,\n      onDrop      : this._onDrop,\n      ...safe\n    }, children)\n  },\n\n  _handle(state, prevent) {\n    return event => {\n      if (prevent) event.preventDefault()\n      this.setState(state)\n    }\n  },\n\n  _onDragStart(e) {\n    let { effect, allow, message } = this.props\n\n    e.dataTransfer.setData('text/plain', JSON.stringify(message))\n    e.dataTransfer.dropEffect    = effect\n    e.dataTransfer.effectAllowed = allow\n\n    this.setState({ dragging: true })\n  },\n\n  _onDrop(e) {\n    e.preventDefault()\n\n    let message  = JSON.parse(e.dataTransfer.getData('text/plain'))\n    let receiver = this.props.message\n\n    this.props.onDrop(message, receiver)\n\n    this.setState({ droppable: false, dragging: false })\n  }\n\n})\n\nexport default Dragon\n"]}